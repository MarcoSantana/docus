<div class="col-md-4 col-md-offset-4 m-y-3">
  <div class="card text-xs-center">
    <%= image_tag @personal_document.image.url, class: 'card-img-top img-fluid img-center p-x-3' %>
    <div class="card-block ">
      <%= form_for(@personal_document, layout: :basic)  do |f| %>
          <% if @personal_document.errors.any? %>
              <div class="alert alert-danger" role="alert">
                <h4><%= pluralize(@personal_document.errors.count, 'error') %> evitó crear este documento:</h4>
                <ul class="list-group-warning">
                  <% @personal_document.errors.full_messages.each do |message| %>
                      <li class="list-group-item"><%= message %></li>
                  <% end %>
                </ul>
              </div>
          <% end %>
          <fieldset class="form-group">
            <%= f.select(:description, PersonalDocument.descriptions.keys.map {|description| [description.titleize,description]}, label: 'Descripción del documento',class: 'form-control') %>

            <% if current_user.role < 'aspirante' %>
                <%= f.select(:status, PersonalDocument.statuses.keys.map {|status| [status.titleize,status]}, class: 'form-control') %>
                <%= f.text_area :comentary, class: 'form-control' %>
            <% end %>
          </fieldset>
          <%= f.file_field :image, :onchange => 'previewFile()', placeholder: 'Elegir imagen', class: 'form-control', label:'Imagen' %>
          <div class="actions">
            <%= button_tag( class: 'btn btn-success') do %>
                <p class="hidden-md-down">Guardar</p><i class="material-icons hidden-sm-up">save</i>
            <% end %>
          </div>


      <% end %>

  </div>
</div>




<script language="JavaScript">
  function previewFile() {
    var preview = document.querySelector('img');
    var file    = document.querySelector('input[type=file]').files[0];
    var reader  = new FileReader();

    reader.onloadend = function () {
      preview.src = reader.result;
    }

    if (file) {
      reader.readAsDataURL(file);
    } else {
      preview.src = "";
    }
  }
</script>