<%= javascript_include_tag "//www.google.com/jsapi", "chartkick" %>

<div id="wrapper">
  <div id="header" class="panels">
    <%= image_tag current_user.avatar.url, class: 'usr_avatar img-rounded' %>
  </div>

  <div class="navbar-fixed-top" id="name">
      <h2 class="">
        <%= current_user.compound_name %>
        <%= link_to edit_user_registration_path, class: 'btn btn-success  btn-fab  pull-right' do %>
            <i class="material-icons">edit</i>
        <% end %>
      </h2>

  </div>

  <div id="b" class="panels card-group">
    <div class="card" style="background-color: white">
      <h3 class="p-x-1">Estado de documentos</h3>
      <% if !current_user.administrador? %>
          <%= pie_chart current_user.documents.all.group(:status).count.map { |k, v| [Document.statuses.key(k).to_s.titleize, v] }%>
      <% else %>
          <%= pie_chart Document.all.group(:status).count.map { |k, v| [Document.statuses.key(k).to_s.titleize, v] } %>
      <% end %>
      <p class="card-text">Total del documentos:<span class="badge"> <%= current_user.documents.all.count %></span></p>

    </div>
    <div class="card p-x-1">
      <h3>Actividad por semana</h3>
      <%= line_chart current_user.documents.all.group_by_week(:created_at).count %>
    </div>
  </div>
  <div id="c" class="panels">
    <div class="card">
      <%= current_user.titles.each do |title| %>
        title.inspect
      <% end %>
    </div>
  </div>

</div>
